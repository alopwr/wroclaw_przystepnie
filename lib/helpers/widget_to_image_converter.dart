import 'dart:convert';
import 'dart:typed_data';
import 'dart:ui' as ui;

import 'package:flutter/material.dart';
import 'package:flutter/rendering.dart';
import 'package:google_maps_flutter/google_maps_flutter.dart';

var capturingKey = GlobalKey();

class WidgetToImageConverter {
  static const tickedMarkerIconBase64 =
      "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";

  static const orangeMarkerIconBase64 =
      "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";

  static BitmapDescriptor get tickedMarkerIcon {
    return BitmapDescriptor.fromBytes(base64Decode(tickedMarkerIconBase64));
  }

  static BitmapDescriptor get orangeMarkerIcon {
    return BitmapDescriptor.fromBytes(base64Decode(orangeMarkerIconBase64));
  }
  // static Future<Uint8List> captureWidget() async {
  //   try {
  //     print('inside');
  //     RenderRepaintBoundary boundary =
  //         capturingKey.currentContext.findRenderObject();
  //     ui.Image image = await boundary.toImage(pixelRatio: 3.0);
  //     ByteData byteData =
  //         await image.toByteData(format: ui.ImageByteFormat.png);
  //     var pngBytes = byteData.buffer.asUint8List();
  //     var bs64 = base64Encode(pngBytes);
  //     print(pngBytes);
  //     print(bs64);
  //     return pngBytes;
  //   } catch (e) {
  //     print(e);
  //   }
  // }
}
